import { getRegistryItem } from "@glinui/registry"
import { Command, CommandInput, CommandList, CommandEmpty, CommandGroup, CommandItem, CommandSeparator, CommandShortcut } from "@glinui/ui"
import { ComponentDocLayout } from "@/components/docs/component-doc-layout"
import { ExampleBlock } from "@/components/docs/example-block"
import { InstallTabs } from "@/components/docs/install-tabs"
import { getComponentSources } from "@/lib/get-component-source"
import { PropsTable } from "@/components/docs/props-table"

export const dynamic = "force-static"
export const item = getRegistryItem("command")
export const sources = getComponentSources(item?.files)
export const metadata = {
  title: "Command - Glin UI",
  description: item?.description ?? "Command palette for keyboard-driven actions and search."
}

<ComponentDocLayout
  badgeLabel="Primitive / Molecule"
  componentId="command"
  implementation="cmdk"
  title="Command"
  description={item?.description ?? "Command palette for keyboard-driven actions and search."}
>
  ## Installation

  Install from the package for shared ownership or from the registry for copy-paste control.

  ### Package Manager

  <InstallTabs sources={sources} command={item?.install.package ?? "pnpm add @glinui/ui @glinui/tokens"} />

  ### Registry

  <InstallTabs command={item?.install.registry ?? "pnpm dlx @glinui/cli@latest add command"} />

  ## Usage

  Command wraps `cmdk` with Glin UI glass tokens. Compose `CommandInput`, `CommandList`, `CommandGroup`, and `CommandItem` to build a fully keyboard-navigable palette.

  <ExampleBlock
    codeDefaultOpen
    code={`import { Command, CommandInput, CommandList, CommandEmpty, CommandGroup, CommandItem } from "@glinui/ui"

export function CommandBasicDemo() {
  return (
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Type a command..." />
      <CommandList>
        <CommandEmpty>No results found.</CommandEmpty>
        <CommandGroup heading="Suggestions">
          <CommandItem>Calendar</CommandItem>
          <CommandItem>Search</CommandItem>
          <CommandItem>Settings</CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  )
}`}
  >
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Type a command..." />
      <CommandList>
        <CommandEmpty>No results found.</CommandEmpty>
        <CommandGroup heading="Suggestions">
          <CommandItem>Calendar</CommandItem>
          <CommandItem>Search</CommandItem>
          <CommandItem>Settings</CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  </ExampleBlock>

  ## Examples

  ### With Groups

  Use `CommandGroup` with a `heading` to visually separate related actions. Add `CommandSeparator` between groups.

  <ExampleBlock
    code={`import { Command, CommandInput, CommandList, CommandEmpty, CommandGroup, CommandItem, CommandSeparator } from "@glinui/ui"

export function CommandGroupsDemo() {
  return (
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Search..." />
      <CommandList>
        <CommandEmpty>No results found.</CommandEmpty>
        <CommandGroup heading="Files">
          <CommandItem>Open file</CommandItem>
          <CommandItem>New file</CommandItem>
        </CommandGroup>
        <CommandSeparator />
        <CommandGroup heading="Workspace">
          <CommandItem>Settings</CommandItem>
          <CommandItem>Extensions</CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  )
}`}
  >
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Search..." />
      <CommandList>
        <CommandEmpty>No results found.</CommandEmpty>
        <CommandGroup heading="Files">
          <CommandItem>Open file</CommandItem>
          <CommandItem>New file</CommandItem>
        </CommandGroup>
        <CommandSeparator />
        <CommandGroup heading="Workspace">
          <CommandItem>Settings</CommandItem>
          <CommandItem>Extensions</CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  </ExampleBlock>

  ### With Shortcuts

  Append `CommandShortcut` inside any `CommandItem` to display a keyboard shortcut hint.

  <ExampleBlock
    code={`import { Command, CommandInput, CommandList, CommandGroup, CommandItem, CommandShortcut } from "@glinui/ui"

export function CommandShortcutsDemo() {
  return (
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Search..." />
      <CommandList>
        <CommandGroup heading="Navigation">
          <CommandItem>
            Profile
            <CommandShortcut>⌘P</CommandShortcut>
          </CommandItem>
          <CommandItem>
            New Window
            <CommandShortcut>⌘N</CommandShortcut>
          </CommandItem>
          <CommandItem>
            Settings
            <CommandShortcut>⌘,</CommandShortcut>
          </CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  )
}`}
  >
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Search..." />
      <CommandList>
        <CommandGroup heading="Navigation">
          <CommandItem>
            Profile
            <CommandShortcut>⌘P</CommandShortcut>
          </CommandItem>
          <CommandItem>
            New Window
            <CommandShortcut>⌘N</CommandShortcut>
          </CommandItem>
          <CommandItem>
            Settings
            <CommandShortcut>⌘,</CommandShortcut>
          </CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  </ExampleBlock>

  ### Empty State

  `CommandEmpty` renders when the search query returns no matching items.

  <ExampleBlock
    code={`import { Command, CommandInput, CommandList, CommandEmpty, CommandGroup, CommandItem } from "@glinui/ui"

export function CommandEmptyDemo() {
  return (
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Search for something rare..." />
      <CommandList>
        <CommandEmpty>No results found.</CommandEmpty>
        <CommandGroup heading="Items">
          <CommandItem>Visible item</CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  )
}`}
  >
    <Command className="max-w-md">
      <CommandInput aria-label="Command search" placeholder="Search for something rare..." />
      <CommandList>
        <CommandEmpty>No results found.</CommandEmpty>
        <CommandGroup heading="Items">
          <CommandItem>Visible item</CommandItem>
        </CommandGroup>
      </CommandList>
    </Command>
  </ExampleBlock>

  ### Surface Variants

  <ExampleBlock
    code={`import { Command, CommandInput, CommandList, CommandGroup, CommandItem } from "@glinui/ui"

export function CommandVariantsDemo() {
  return (
    <div className="grid gap-3 md:grid-cols-2">
      <Command variant="glass" size="sm">
        <CommandInput aria-label="Command search" placeholder="Glass palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
      <Command variant="matte" size="sm">
        <CommandInput aria-label="Command search" placeholder="Matte palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
      <Command variant="liquid" size="sm">
        <CommandInput aria-label="Command search" placeholder="Liquid palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
      <Command variant="outline" size="sm">
        <CommandInput aria-label="Command search" placeholder="Outline palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
    </div>
  )
}`}
  >
    <div className="grid gap-3 md:grid-cols-2">
      <Command variant="glass" size="sm">
        <CommandInput aria-label="Command search" placeholder="Glass palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
      <Command variant="matte" size="sm">
        <CommandInput aria-label="Command search" placeholder="Matte palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
      <Command variant="liquid" size="sm">
        <CommandInput aria-label="Command search" placeholder="Liquid palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
      <Command variant="outline" size="sm">
        <CommandInput aria-label="Command search" placeholder="Outline palette" />
        <CommandList>
          <CommandGroup heading="Actions">
            <CommandItem>Open settings</CommandItem>
          </CommandGroup>
        </CommandList>
      </Command>
    </div>
  </ExampleBlock>

  ## Accessibility

  - Keyboard navigation and roving focus are provided by `cmdk`.
  - Do not rely on placeholder text as a label. Provide an explicit `aria-label` or visible label for `CommandInput`.
  - Keep command groups concise to reduce cognitive load.
  - `CommandEmpty` provides a visible fallback for screen readers.

  ## Reduced Motion

  Command interactions are state-based with no transform-heavy animations. Motion respects `prefers-reduced-motion` automatically.

  ## API Reference

  <PropsTable componentId="command" autoAppendGenerated />

  ### Source

  ```tsx
  import {
    Command,
    CommandInput,
    CommandList,
    CommandEmpty,
    CommandGroup,
    CommandItem,
    CommandSeparator,
    CommandShortcut,
  } from "@glinui/ui"
  ```

  {item?.files?.map((file) => (
    <div key={file} className="font-mono text-sm text-neutral-600 dark:text-neutral-300">
      {file}
    </div>
  ))}
</ComponentDocLayout>
