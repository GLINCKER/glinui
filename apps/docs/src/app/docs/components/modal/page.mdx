import { getRegistryItem } from "@glinui/registry"
import { Button, Input, Label, Modal, ModalTrigger, ModalClose, ModalPortal, ModalOverlay, ModalContent, ModalHeader, ModalFooter, ModalTitle, ModalDescription } from "@glinui/ui"
import { ComponentDocLayout } from "@/components/docs/component-doc-layout"
import { ExampleBlock } from "@/components/docs/example-block"
import { InstallTabs } from "@/components/docs/install-tabs"
import { getComponentSources } from "@/lib/get-component-source"
import { PropsTable } from "@/components/docs/props-table"
import { createDocsMetadata } from "@/lib/docs-metadata"

export const dynamic = "force-static"
export const item = getRegistryItem("modal")
export const sources = getComponentSources(item?.files)
export const metadata = createDocsMetadata({
  title: "Modal",
  description: item?.description ?? "Layered dialog for focused tasks or confirmations.",
  path: "/docs/components/modal"
})

<ComponentDocLayout
  badgeLabel="Primitive / Molecule"
  componentId="modal"
  implementation="radix"
  title="Modal / Dialog"
  description={item?.description ?? "Layered dialog for focused tasks or confirmations."}
>
  ## Installation

  Install from the package for shared ownership or from the registry for copy-paste control.

  ### Package Manager

  <InstallTabs sources={sources} command={item?.install.package ?? "pnpm add @glinui/ui @glinui/tokens"} />

  ### Registry

  <InstallTabs command={item?.install.registry ?? "pnpm dlx @glinui/cli@latest add modal"} />

  ## Usage

  Wrap `ModalTrigger` around a trigger element and place your dialog structure inside `ModalContent`. The content panel is fixed, centered, and constrained to `min(92vw, 34rem)` by default. Use `variant` (`default | glass | matte`) and `size` (`sm | md | lg`) on `ModalContent` for visual tuning.

  <ExampleBlock
    codeDefaultOpen
    code={`import { Button, Modal, ModalTrigger, ModalClose, ModalContent, ModalHeader, ModalFooter, ModalTitle, ModalDescription } from "@glinui/ui"

export function ModalBasicDemo() {
  return (
    <Modal>
      <ModalTrigger asChild>
        <Button variant="glass">Open Modal</Button>
      </ModalTrigger>
      <ModalContent variant="glass">
        <ModalHeader>
          <ModalTitle>Edit Profile</ModalTitle>
          <ModalDescription>Make changes to your profile here.</ModalDescription>
        </ModalHeader>
        <div className="rounded-xl border border-black/10 bg-black/[0.02] p-3 text-sm text-neutral-700 dark:border-white/[0.14] dark:bg-white/[0.04] dark:text-neutral-200">
          {"You can pass variant and size to ModalContent to tune the visual weight for each workflow."}
        </div>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Cancel</Button>
          </ModalClose>
          <Button variant="liquid">Save changes</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  )
}`}
  >
    <Modal>
      <ModalTrigger asChild>
        <Button variant="glass">Open Modal</Button>
      </ModalTrigger>
      <ModalContent variant="glass">
        <ModalHeader>
          <ModalTitle>Edit Profile</ModalTitle>
          <ModalDescription>Make changes to your profile here.</ModalDescription>
        </ModalHeader>
        <div className="rounded-xl border border-black/10 bg-black/[0.02] p-3 text-sm text-neutral-700 dark:border-white/[0.14] dark:bg-white/[0.04] dark:text-neutral-200">
          {"You can pass variant and size to ModalContent to tune the visual weight for each workflow."}
        </div>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Cancel</Button>
          </ModalClose>
          <Button variant="liquid">Save changes</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  </ExampleBlock>

  ## Examples

  ### With Form Content

  Place form fields inside the body area between `ModalHeader` and `ModalFooter`.

  <ExampleBlock
    code={`import { Button, Modal, ModalTrigger, ModalClose, ModalContent, ModalHeader, ModalFooter, ModalTitle, ModalDescription } from "@glinui/ui"

export function ModalFormDemo() {
  return (
    <Modal>
      <ModalTrigger asChild>
        <Button variant="glass">Edit Details</Button>
      </ModalTrigger>
      <ModalContent variant="matte">
        <ModalHeader>
          <ModalTitle>Account Settings</ModalTitle>
          <ModalDescription>Update your display name and email address.</ModalDescription>
        </ModalHeader>
        <div className="space-y-3 py-1">
          <div className="space-y-1">
            <Label htmlFor="modal-name">Display Name</Label>
            <Input id="modal-name" variant="glass" placeholder="Your name" />
          </div>
          <div className="space-y-1">
            <Label htmlFor="modal-email">Email</Label>
            <Input id="modal-email" type="email" variant="glass" placeholder="you@example.com" />
          </div>
        </div>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Cancel</Button>
          </ModalClose>
          <Button variant="liquid">Save changes</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  )
}`}
  >
    <Modal>
      <ModalTrigger asChild>
        <Button variant="glass">Edit Details</Button>
      </ModalTrigger>
      <ModalContent variant="matte">
        <ModalHeader>
          <ModalTitle>Account Settings</ModalTitle>
          <ModalDescription>Update your display name and email address.</ModalDescription>
        </ModalHeader>
        <div className="space-y-3 py-1">
          <div className="space-y-1">
            <Label htmlFor="modal-name">Display Name</Label>
            <Input id="modal-name" variant="glass" placeholder="Your name" />
          </div>
          <div className="space-y-1">
            <Label htmlFor="modal-email">Email</Label>
            <Input id="modal-email" type="email" variant="glass" placeholder="you@example.com" />
          </div>
        </div>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Cancel</Button>
          </ModalClose>
          <Button variant="liquid">Save changes</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  </ExampleBlock>

  ### Frosted Variant

  Use `variant="frosted"` for a heavier frost with stronger blur and inner glow. Great for prominent dialogs.

  <ExampleBlock
    code={`import { Button, Modal, ModalTrigger, ModalClose, ModalContent, ModalHeader, ModalFooter, ModalTitle, ModalDescription } from "@glinui/ui"

export function ModalFrostedDemo() {
  return (
    <Modal>
      <ModalTrigger asChild>
        <Button variant="frosted">Frosted Modal</Button>
      </ModalTrigger>
      <ModalContent variant="frosted">
        <ModalHeader>
          <ModalTitle>Frosted Glass</ModalTitle>
          <ModalDescription>Heavy frost with 40px blur, 200% saturation, and inner glow.</ModalDescription>
        </ModalHeader>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Close</Button>
          </ModalClose>
          <Button variant="liquid">Continue</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  )
}`}
  >
    <Modal>
      <ModalTrigger asChild>
        <Button variant="frosted">Frosted Modal</Button>
      </ModalTrigger>
      <ModalContent variant="frosted">
        <ModalHeader>
          <ModalTitle>Frosted Glass</ModalTitle>
          <ModalDescription>Heavy frost with 40px blur, 200% saturation, and inner glow.</ModalDescription>
        </ModalHeader>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Close</Button>
          </ModalClose>
          <Button variant="liquid">Continue</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  </ExampleBlock>

  ### Confirmation Dialog

  Use a short `ModalDescription` and a destructive action button for irreversible operations.

  <ExampleBlock
    code={`import { Button, Modal, ModalTrigger, ModalClose, ModalContent, ModalHeader, ModalFooter, ModalTitle, ModalDescription } from "@glinui/ui"

export function ModalConfirmDemo() {
  return (
    <Modal>
      <ModalTrigger asChild>
        <Button variant="matte">Delete Project</Button>
      </ModalTrigger>
      <ModalContent variant="glass" size="sm">
        <ModalHeader>
          <ModalTitle>Are you sure?</ModalTitle>
          <ModalDescription>
            This action cannot be undone. The project and all its data will be permanently deleted.
          </ModalDescription>
        </ModalHeader>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Cancel</Button>
          </ModalClose>
          <Button variant="liquid">Delete</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  )
}`}
  >
    <Modal>
      <ModalTrigger asChild>
        <Button variant="matte">Delete Project</Button>
      </ModalTrigger>
      <ModalContent variant="glass" size="sm">
        <ModalHeader>
          <ModalTitle>Are you sure?</ModalTitle>
          <ModalDescription>
            This action cannot be undone. The project and all its data will be permanently deleted.
          </ModalDescription>
        </ModalHeader>
        <ModalFooter>
          <ModalClose asChild>
            <Button variant="ghost">Cancel</Button>
          </ModalClose>
          <Button variant="liquid">Delete</Button>
        </ModalFooter>
      </ModalContent>
    </Modal>
  </ExampleBlock>

  ## Accessibility

  - Focus is trapped inside the dialog while open.
  - `Escape` closes the dialog and returns focus to the trigger.
  - `ModalTitle` and `ModalDescription` provide `aria-labelledby` and `aria-describedby` on the dialog element.
  - The backdrop overlay blocks interaction with background content.

  ## Reduced Motion

  The overlay fade and content scale animations respect `prefers-reduced-motion` and collapse to instant transitions.

  ## API Reference

  `Modal` root follows Radix `Dialog.Root` control props (`open`, `defaultOpen`, `onOpenChange`, `modal`).

  ### ModalContent

  <PropsTable componentId="modal" propsType="ModalContentProps" autoAppendGenerated />

  ### Source

  ```tsx
  import {
    Modal,
    ModalTrigger,
    ModalClose,
    ModalPortal,
    ModalOverlay,
    ModalContent,
    ModalHeader,
    ModalFooter,
    ModalTitle,
    ModalDescription,
  } from "@glinui/ui"
  ```

  {item?.files?.map((file) => (
    <div key={file} className="font-mono text-sm text-neutral-600 dark:text-neutral-300">
      {file}
    </div>
  ))}
</ComponentDocLayout>
