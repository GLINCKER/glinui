import { getRegistryItem } from "@glinui/registry"
import { Counter } from "@glinui/ui"
import { ComponentDocLayout } from "@/components/docs/component-doc-layout"
import { ExampleBlock } from "@/components/docs/example-block"
import { InstallTabs } from "@/components/docs/install-tabs"
import { getComponentSources } from "@/lib/get-component-source"
import { PropsTable } from "@/components/docs/props-table"
import { createDocsMetadata } from "@/lib/docs-metadata"

export const dynamic = "force-static"
export const item = getRegistryItem("counter")
export const sources = getComponentSources(item?.files)
export const metadata = createDocsMetadata({
  title: "Counter",
  description: item?.description ?? "Numeric badge that compacts overflow values like 99+.",
  path: "/docs/components/counter"
})

<ComponentDocLayout
  badgeLabel="Primitive / Atom"
  componentId="counter"
  implementation="radix"
  title="Counter"
  description={item?.description ?? "Numeric badge that compacts overflow values like 99+."}
>
  ## Installation

  Install from the package for shared ownership or from the registry for copy-paste control.

  ### Package Manager

  <InstallTabs sources={sources} command={item?.install.package ?? "pnpm add @glinui/ui @glinui/tokens"} />

  ### Registry

  <InstallTabs command={item?.install.registry ?? "pnpm dlx @glinui/cli@latest add counter"} />

  ## Usage

  `Counter` displays a numeric value inside a compact badge. When `value` exceeds `max`, it collapses to the `max+` format (e.g., `99+`). It uses `tabular-nums` to keep the badge width stable as the number changes.

  ### Basic

  <ExampleBlock
    codeDefaultOpen
    code={`import { Counter } from "@glinui/ui"

export function CounterBasicDemo() {
  return <Counter value={5} />
}`}
  >
    <Counter value={5} />
  </ExampleBlock>

  ## Examples

  ### Overflow

  When `value` exceeds `max` (default `99`), the display collapses to `max+` to prevent layout shift.

  <ExampleBlock
    code={`import { Counter } from "@glinui/ui"

export function CounterOverflowDemo() {
  return (
    <div className="flex items-center gap-4">
      <Counter value={42} />
      <Counter value={99} />
      <Counter value={150} />
      <Counter value={1200} />
    </div>
  )
}`}
  >
    <div className="flex items-center gap-4">
      <Counter value={42} />
      <Counter value={99} />
      <Counter value={150} />
      <Counter value={1200} />
    </div>
  </ExampleBlock>

  ### Custom Max

  Override the collapse threshold with `max` to suit different contexts — notification trays, cart counts, or mention lists.

  <ExampleBlock
    code={`import { Counter } from "@glinui/ui"

export function CounterCustomMaxDemo() {
  return (
    <div className="flex items-center gap-4">
      <Counter value={42} max={50} />
      <Counter value={55} max={50} />
      <Counter value={9} max={9} />
      <Counter value={10} max={9} />
    </div>
  )
}`}
  >
    <div className="flex items-center gap-4">
      <Counter value={42} max={50} />
      <Counter value={55} max={50} />
      <Counter value={9} max={9} />
      <Counter value={10} max={9} />
    </div>
  </ExampleBlock>

  ### Variants

  <ExampleBlock
    code={`import { Counter } from "@glinui/ui"

export function CounterVariantDemo() {
  return (
    <div className="flex flex-wrap items-center gap-3">
      <Counter value={7} variant="default" />
      <Counter value={7} variant="glass" />
      <Counter value={7} variant="outline" />
      <Counter value={7} variant="ghost" />
    </div>
  )
}`}
  >
    <div className="flex flex-wrap items-center gap-3">
      <Counter value={7} variant="default" />
      <Counter value={7} variant="glass" />
      <Counter value={7} variant="outline" />
      <Counter value={7} variant="ghost" />
    </div>
  </ExampleBlock>

  ### Sizes

  <ExampleBlock
    code={`import { Counter } from "@glinui/ui"

export function CounterSizeDemo() {
  return (
    <div className="flex flex-wrap items-center gap-3">
      <Counter value={12} size="sm" />
      <Counter value={12} size="md" />
      <Counter value={12} size="lg" />
    </div>
  )
}`}
  >
    <div className="flex flex-wrap items-center gap-3">
      <Counter value={12} size="sm" />
      <Counter value={12} size="md" />
      <Counter value={12} size="lg" />
    </div>
  </ExampleBlock>

  ## Accessibility

  - `Counter` should be accompanied by a visible label in its surrounding context (e.g., "Notifications: 12") so the number is not the sole conveyor of meaning.
  - When used as a live notification badge, wrap the containing element with `aria-live="polite"` so screen readers announce value changes.
  - The truncated `max+` format must be interpreted from context — add an `aria-label` to clarify if necessary (e.g., `aria-label="More than 99 notifications"`).
  - Do not rely on the counter's color alone to communicate urgency; pair with surrounding labels.

  ## Reduced Motion

  `Counter` is a static numeric display with no animation. No reduced-motion considerations apply.

  ## API Reference

  <PropsTable componentId="counter" autoAppendGenerated />

  ## Source

  ```tsx
  import { Counter } from "@glinui/ui"
  ```

  {item?.files?.map((file) => (
    <div key={file} className="font-mono text-sm text-neutral-600 dark:text-neutral-300">
      {file}
    </div>
  ))}
</ComponentDocLayout>
