import { getRegistryItem } from "@glinui/registry"
import { ComponentDocLayout } from "@/components/docs/component-doc-layout"
import { ExampleBlock } from "@/components/docs/example-block"
import { InstallTabs } from "@/components/docs/install-tabs"
import { getComponentSources } from "@/lib/get-component-source"
import { PropsTable } from "@/components/docs/props-table"
import { ToastBasicDemo, ToastTypesDemo, ToastActionDemo, ToastPromiseDemo } from "@/components/demos/toast-demos"

export const dynamic = "force-static"
export const item = getRegistryItem("toast")
export const sources = getComponentSources(item?.files)
export const metadata = {
  title: "Toast - Glin UI",
  description: "Glassmorphic toast notifications powered by Sonner with success, error, warning, info, loading, promise, and action support."
}

<ComponentDocLayout
  badgeLabel="Primitive / Molecule"
  componentId="toast"
  implementation="radix"
  title="Toast"
  description="Glassmorphic toast notifications powered by Sonner with success, error, warning, info, loading, promise, and action support."
>
  ## Installation

  ### Package Manager

  <InstallTabs sources={sources} command={item?.install.package ?? "pnpm add @glinui/ui @glinui/tokens sonner"} />

  ### Registry

  <InstallTabs command={item?.install.registry ?? "pnpm dlx @glinui/cli@latest add toast"} />

  ## Usage

  Add `<Toaster />` once in your root layout, then call `toast()` from anywhere.

  ### Setup

  ```tsx
  // app/layout.tsx
  import { Toaster } from "@glinui/ui"

  export default function RootLayout({ children }: { children: React.ReactNode }) {
    return (
      <html>
        <body>
          {children}
          <Toaster variant="glass" closeButton />
        </body>
      </html>
    )
  }
  ```

  ### Basic

  <ExampleBlock
    codeDefaultOpen
    code={`import { toast, Button } from "@glinui/ui"

export function ToastBasicDemo() {
  return (
    <Button onClick={() => toast("Settings saved", {
      description: "Your workspace has been updated."
    })} variant="glass">
      Show toast
    </Button>
  )
}`}
  >
    <ToastBasicDemo />
  </ExampleBlock>

  ## Examples

  ### Toast Types

  Five semantic types with automatic icons and color-coded styling.

  <ExampleBlock
    code={`import { toast, Button } from "@glinui/ui"

export function ToastTypesDemo() {
  return (
    <div className="flex flex-wrap gap-2">
      <Button size="sm" variant="glass" onClick={() => toast.success("Saved", { description: "Changes applied." })}>Success</Button>
      <Button size="sm" variant="glass" onClick={() => toast.error("Failed", { description: "Something went wrong." })}>Error</Button>
      <Button size="sm" variant="glass" onClick={() => toast.warning("Careful", { description: "This cannot be undone." })}>Warning</Button>
      <Button size="sm" variant="glass" onClick={() => toast.info("Heads up", { description: "A new version is available." })}>Info</Button>
      <Button size="sm" variant="glass" onClick={() => toast.loading("Processing...")}>Loading</Button>
    </div>
  )
}`}
  >
    <ToastTypesDemo />
  </ExampleBlock>

  ### Action Button

  Add an action button for undo-style workflows.

  <ExampleBlock
    code={`import { toast, Button } from "@glinui/ui"

export function ToastActionDemo() {
  return (
    <Button onClick={() => toast("File deleted", {
      description: "The file has been moved to trash.",
      action: { label: "Undo", onClick: () => toast.success("Restored") }
    })} variant="liquid">
      Delete file
    </Button>
  )
}`}
  >
    <ToastActionDemo />
  </ExampleBlock>

  ### Promise Toast

  Automatically transitions from loading to success or error based on promise outcome.

  <ExampleBlock
    code={`import { toast, Button } from "@glinui/ui"

export function ToastPromiseDemo() {
  const generateReport = () =>
    new Promise((resolve) => setTimeout(resolve, 2000))

  return (
    <Button onClick={() => toast.promise(generateReport(), {
      loading: "Generating report...",
      success: "Report is ready and shared with your team.",
      error: "Failed to generate report"
    })} variant="glass">
      Generate report
    </Button>
  )
}`}
  >
    <ToastPromiseDemo />
  </ExampleBlock>

  ### Custom Duration

  Set `duration` per-toast or globally on the `Toaster`.

  ```tsx
  // 10 second toast
  toast("Long-running task", { duration: 10000 })

  // Persistent toast (no auto-close)
  toast("Requires action", { duration: Infinity })
  ```

  ### Dismiss

  Dismiss a specific toast by ID or all toasts at once.

  ```tsx
  const id = toast("Processing...")
  // Later...
  toast.dismiss(id)   // dismiss specific
  toast.dismiss()     // dismiss all
  ```

  ### Glass Variant

  Use `variant="glass"` on the `Toaster` for frosted glass surfaces.

  ```tsx
  <Toaster variant="glass" />
  ```

  ### Matte Variant

  ```tsx
  <Toaster variant="matte" />
  ```

  ### Positions

  Six positions: `top-left`, `top-center`, `top-right`, `bottom-left`, `bottom-center`, `bottom-right`.

  ```tsx
  <Toaster position="top-center" />
  ```

  ## Accessibility

  - ARIA live region announcements for all toast types.
  - Auto-pause on hover gives users time to read.
  - Swipe-to-dismiss with configurable direction.
  - Keyboard accessible with hotkey support (`Alt+T` by default).
  - Keep toast messages short (under 140 characters) for screen readers.

  ## Reduced Motion

  Slide and opacity transitions respect `prefers-reduced-motion`. When enabled, toasts fade in without translate animation.

  ## API Reference

  ### Toaster

  <PropsTable componentId="toast" propsType="ToastProps" autoAppendGenerated />

  ### toast() Options

  Sonner runtime options remain available on `toast()` calls:

  - `description`: secondary content below title
  - `duration`: per-toast auto-dismiss timeout
  - `icon`: custom icon node
  - `action`: primary button `{ label, onClick }`
  - `cancel`: secondary button `{ label, onClick }`
  - `onDismiss`, `onAutoClose`: lifecycle callbacks
  - `dismissible`: allow swipe/click dismissal

  ## Source

  ```tsx
  import { Toaster, toast } from "@glinui/ui"
  ```

  {item?.files?.map((file) => (
    <div key={file} className="font-mono text-sm text-neutral-600 dark:text-neutral-300">
      {file}
    </div>
  ))}
</ComponentDocLayout>
